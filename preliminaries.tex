\begin{chapter}{Preliminaries}
Throughout the text, $k$ will denote a field of characteristic zero.
\begin{section}{The path algebra of a quiver}
A \emph{quiver} is a quadruple $Q=(Q_0, Q_1, s,t)$, where $Q_0$ and $Q_1$ are finite sets whose elements are called \emph{vertices} and \emph{arrows} respectively, and $s,t:Q_1\to Q_0$ are functions that associate to each arrow $\alpha\in Q_1$ its \emph{source} $s(\alpha)\in Q_0$ and its \emph{target} 
$t(\alpha)\in Q_0$. We will usually abbreviate the fact that an arrow $\alpha\in Q_1$ has source $a$ and target $b$ using the notation $\alpha:a\to b$. We will also omit mentioning $s$ and $t$ explicitly when they are clear from context.

One can represent a quiver graphically as an oriented graph allowing loops and multiple arrows between the same pair of vertices. The following are some examples of quivers:
\[
\begin{tikzpicture}[->, node distance=1cm, thick, auto]
\tikzstyle{every node} = [circle, fill=gray!30, minimum size=.5cm]
\tikzset{every loop/.style={looseness=15}}
\node (a) at (0:1) {};
\node (b) at (120:1) {};
\node (c) at (240:1) {};
\path (a) edge [bend right] (b)
(b) edge [bend right] (c)
(c) edge [bend right] (a)
(a) edge [in=15, out=-15, loop] (a)
(b) edge [in=135, out=105, loop] (b)
(c) edge [in=255, out=225, loop] (c);
\node (d) [right=of a,xshift=2cm] {};
\node (e) [right=of d] {};
\foreach \from/\to in {d/e, e/d}
\draw (d.40) -- (e.140);
\draw (e) -- (d);
\draw (d.320) -- (e.220);
\end{tikzpicture}
\]
\[
\begin{tikzpicture}[->,node distance=1cm, thick]
\tikzstyle{every node} = [circle, fill=gray!30, minimum size=.5cm]
\node (1) {};
\node (2) [right=of 1] {};
\node (3) [right=of 2] {};
\node (4) [right=of 3] {};
\node (5) [right=of 4] {};
\node (6) [right=of 5] {};
\node (7) [right=of 6] {};
\node (8) [below=of 3] {};
\foreach \from/\to in {2/1, 3/2, 3/4, 3/8, 4/5, 5/6, 6/7}
\draw [->] (\from) -- (\to);
\end{tikzpicture}
\]
Let $Q=(Q_0, Q_1, s, t)$ be a quiver and consider the $k$-vector spaces $R=k^{Q_0}$ and $A=k^{Q_1}$, which we will call the \emph{vertex span} and \emph{arrow span} of $Q$, respectively. The space $R$ is a commutative $k$-algebra with the product given by pointwise multiplication. Thus, we can consider an $R$-bimodule structure on $A$ given as follows: if $r\in Q_0$, $\alpha\in Q_1$ then we define $r\alpha = \delta_{r,t(\alpha)} \alpha$ and analogously $\alpha r = \delta_{r, s(\alpha)}\alpha$, and extend the action linearly. Therefore, a vertex $r$ acts as the identity on the left (right) of an arrow $\alpha$ if the target (source) of $\alpha$ is $r$, and otherwise acts as zero. The \emph{path algebra} $\kQ$ associated to the quiver $Q$ is the graded tensor algebra
\[
\kQ = \bigoplus_{n=0}^\infty A^{\otimes_R n},
\]
where we set $A^{\otimes_R 0}=R$. For the sake of simplicity we will usually notate $A^{\otimes_R n}$ as $A^n$ and an elementary tensor $\alpha_n\otimes\dots\otimes \alpha_1$ as $\alpha_n\dots\alpha_1$. Notice that a non-zero element of the form $\alpha_n\dots\alpha_1$ consists of a sequence of \emph{concatenable} arrows $\alpha_i$, that is, arrows such that $s(\alpha_{i+1})=t(\alpha_i)$. We will call such an element a \emph{path of length n}. It is worth observing that the collection of all paths of length $n$ form a basis of $A^n$ as a $k$-vector space. Since $Q_0$ is a basis of $A^0=R$, we will refer to elements of $Q_0$ as \emph{paths of length 0}, which we will usually call \emph{trivial} or \emph{stationary} paths. Considering $Q_0$ and $Q_1$ are in bijection with paths of length 0 and 1 respectively, we will denote the set of paths of length $n$ as $Q_n$ and the set of all paths as $Q_*$. We can now define source and target functions $s,t:Q_*\to Q_0$ as follows: if $u=\alpha_n\dots\alpha_0\in Q_n$ with $n>0$, then $s(u)=s(\alpha_0)$ and $t(u)=t(\alpha_n)$. Otherwise, if $u=r\in Q_0$ then $s(u)=t(u)=r$. Thus, one easily checks that if $a,b\in Q_0$, the space spanned by paths with source $a$ and target $b$ is exactly $b\kQ a$.

The path algebra satisfies the following useful universal property:

\begin{prop} Let $Q$ be a quiver and $\Lambda$ be an associative $k$-algebra with unit. Suppose $f_0:Q_0\to \Lambda$, $f_1:Q_1\to\Lambda$ are maps satisfying:
\begin{enumerate}
\item $\sum_{r\in Q_0} f_0(r)=1$.
\item If $a\in Q_0$, then $f_0^2(a)=f_0(a)$.
\item If $a\neq b\in Q_0$, then $f_0(a)f_0(b)=0$.
\item If $\alpha:a\to b$ is an arrow in $Q_1$, then $f_1(\alpha) = f_0(b) f_1(\alpha) f_0(a)$.
\end{enumerate}
Then, there exists a unique $k$-algebra morphism $f:\kQ\to \Lambda$ extending $f_0$ and $f_1$.
\end{prop}
\begin{proof} If $n\geq 1$, define $f(\alpha_n\dots\alpha_1)=f_1(\alpha_n)\dots f_1(\alpha_0)$ and let $f(r)=f_0(r)$ for $r\in Q_0$. As the set of all paths forms a basis of $\kQ$ as a vector space, this defines a $k$-linear map $f:\kQ\to \Lambda$. Condition 1 guarantees that such a map preserves the unit and conditions 2, 3 and 4 guarantee that it preserves products involving stationary paths. Since by definition $f$ preserves products of non-trivial paths, we conclude that $f$ is a $k$-algebra morphism extending $f_0$ and $f_1$. As for uniqueness, consider another extension $g:\kQ\to\Lambda$. Since $g$ is a $k$-algebra morphism, we have that $g(\alpha_n\dots\alpha_1)= g(\alpha_n)\dots g(\alpha_1)= f_1(\alpha_n)\dots f_1(\alpha_1)=f(\alpha_n\dots\alpha_1)$ for $n\geq 1$ and $g(r)=f_0(r)=f(r)$ for all $r\in Q_0$. Thus $g$ agrees with $f$ in a basis, and so $g=f$ as wanted.
\end{proof}
Let us now consider some examples:
\begin{exmp} Let $Q$ be the quiver with vertices $\{1,\dots,n\}$ and no arrows:
\[
\begin{tikzpicture}[node distance=1cm, auto, thick]
\tikzstyle{every node} = [circle, fill=gray!30, minimum size=.5cm, inner sep=.07cm]
\node (1) {1};
\node (2) [right=of 1] {2};
\node (3) [right=of 2] {3};
\node (4) [right=of 3, fill=white] {...};
\node (5) [right=of 4] {n};
\end{tikzpicture}
\]
The path algebra $\kQ$ is then isomorphic to $k^n = ke_1\oplus\dots\oplus ke_n$, where multiplication is given by $e_i e_j = \delta_{i,j} e_i$ and extended linearly.
\end{exmp}

\begin{exmp}\label{one-loop} Let $Q$ be the quiver with a single vertex $1$ and a single arrow $\alpha:1\to 1$:
\[
\begin{tikzpicture}[->, thick]
\tikzset{every loop/.style={looseness=15}}
\node[circle, fill=gray!30, minimum size=.5cm, inner sep=.07cm]  (1) {1};
\path (1) edge [loop above] node {$\alpha$} (1);
\end{tikzpicture}
\]
The path algebra $\kQ$ has a basis given by $\{e_a, \alpha, \alpha^2, \dots\}$. It is easily seen that $\kQ$ is isomorphic to the polynomial algebra $k[x]$, via the map sending $\alpha \mapsto x$ and $1\mapsto 1$.
\end{exmp}
\begin{exmp}\label{several-loops} More generally, let $Q$ be the quiver with a single vertex $1$ and $n$ arrows $\alpha_n:1\to 1$:
\[
\begin{tikzpicture}[->, auto, thick]
\tikzset{every loop/.style={looseness=15}}
\node[circle, fill=gray!30, minimum size=.5cm, inner sep=.07cm]  (1) {1};
\node[circle, fill=white] (2) at +(270: 1) {...};
\path (1) edge [loop left] node {$\alpha_5$} (1);
\path (1) edge [loop above] node {$\alpha_3$} (1);
\path (1) edge [loop right] node {$\alpha_1$} (1);
\path (1) edge [in=30, out=60, loop] node {$\alpha_2$} (1);
\path (1) edge [in=210, out=240, loop] node {$\alpha_6$} (1);
\path (1) edge [in=120, out=150, loop] node {$\alpha_4$} (1);
\path (1) edge [in=300, out=330, loop] node {$\alpha_n$} (1);
\end{tikzpicture}
\]
Then, the path algebra $\kQ$ is isomorphic to the free algebra on $n$ generators $k\langle x_1,\dots, x_n\rangle$, via the map sending $\alpha_i\mapsto x_i$ and $1\mapsto 1$.
\end{exmp}

A path $u\in Q_n$ with $n>1$ such that $s(u)=t(u)$ is called a \emph{cycle}, and a quiver containing no cycles is said to be \emph{acyclic}. As we can infer from the previous examples, the existence of cycles in the quiver is closely related to the dimension of the path algebra. More precisely, we have:

\begin{prop}\label{acyclic-fin-dim}
Let $Q$ be a quiver and $\kQ$ its associated path algebra. Then $\kQ$ is finite-dimensional iff $Q$ is acyclic.
\end{prop}
\begin{proof} Suppose $\kQ$ is infinite-dimensional. Then the set of all paths $Q_*$, which is a basis for $\kQ$, must be infinite. Since the quiver has only a finite number of arrows, there's only a finite number of paths of less than a fixed length. Therefore, if the set of paths $Q_*$ is infinite, then there exist arbitrarily long paths. Let $n$ be the number of vertices in $Q_0$ and pick a path $\alpha_m\dots\alpha_1$ with $m>n$. Then $s(\alpha_i) = t(\alpha_j)$ for some $1\leq i < j\leq m$ and so $\alpha_j\dots\alpha_i$ is a cycle in $Q$.

Conversely, if $Q$ contains a cycle $u$, then $\{u,u^2,u^3,\dots\}$ is an infinite linearly independent set, and so $\kQ$ is infinite-dimensional.
\end{proof}

\begin{section}{The Jacobian algebra of a quiver with potential}

\marginpar{\textcolor{red}{motivación}}

Maintaining our previous notation, we now define the \emph{complete path algebra} $\KQ$ associated to a quiver $Q$ as
\[
\KQ = \prod_{n=0}^\infty A^n,
\]
that is, elements of $\KQ$ are possibly infinitely supported linear combinations of paths in $Q_*$ and the product on $\KQ$ is just the natural extension of the product on $\kQ$.

\marginpar{\textcolor{red}{todo este párrafo debería explicarse mejor una vez que esté hecha la parte del lema topológico}}

The path algebra $\kQ$ admits a $k$-algebra ultranorm $\vert \cdot \vert: \kQ\to [0, \infty)$ such that for each non-zero $x=\sum_{u\in Q_*} \lambda_u u$ we have $\vert x\vert = e^{-\nu(x)}$, where $\nu(x) = \min\{ i\in \NN_0 : |u| = i \text{ and } \lambda_u \neq 0 \}$. We call this the \emph{$\mathfrak{m}$-adic ultranorm} on $\kQ$. One can check that the complete path algebra $\KQ$ is in fact the completion of the path algebra $\kQ$ with respect to the $\mathfrak{m}$-adic ultranorm.

It is easy to see that the usual path algebra $\kQ$ is a dense $k$-subalgebra and $R$-subbimodule of $\KQ$.

\marginpar{\textcolor{red}{acá o bien en la parte del lema topológico habría que probar algunas propiedades básicas de la topología -- cuál es la noción de convergencia, etc.}}

We now consider the completions of the examples of path algebras mentioned previously:

\begin{exmp}Let $Q$ be an acyclic quiver. As we proved in \eqref{acyclic-fin-dim}, the associated path algebra $\kQ$ is finite-dimensional, and so $A^n=0$ for big enough $n$. Therefore, $\bigoplus A^n=\prod A^n$ and thus the path algebra coincides with its completion.
\end{exmp}

\begin{exmp}Let $Q$ be the quiver from \eqref{several-loops}. The isomorphism $\kQ\simeq k\langle x_1,\dots,x_n\rangle$ extends to an isomorphism between the respective completions $\KQ\simeq k\langle\langle x_1,\dots,x_n\rangle\rangle$, where the right-hand side term denotes the algebra of non-commutative formal power series in $n$ variables.
\end{exmp}
\end{section}

Let $\KQ=\prod A^n$ be the complete path algebra associated to a quiver $Q$. For $n\geq 1$, we define the \emph{cyclic part} of $A^n$ as
\[
A^n_{\cyc} = \bigoplus_{r\in Q_0} rA^nr,
\]
that is, the $R$-submodule spanned by cycles of length $n$. A \emph{potential} $S$ is an element of the closed \marginpar{\textcolor{red}{por qué $\KQ_{\cyc}$ es cerrado?}} $R$-submodule $\KQ_{\cyc}\subseteq \KQ$, which we define as
\[
\KQ_{\cyc}=\prod_{n=1}^\infty A^n_{\cyc}
\]
In other words, a potential is a possibly infinitely supported linear combination of cycles. We will call a pair $(Q,S)$ a \emph{quiver with potential}, or \emph{QP} for short.

In their work \cite{RSS80}, Rota, Sagan and Stein introduced a notion of derivative for non-commutative algebras, called the \emph{cyclic derivative}. Here we will work with this concept within the context of the complete path algebra of a quiver. Given an arrow $\alpha\in Q_1$, the cyclic derivative with respect to $\alpha$ is the morphism $\partial_\alpha:\KQ_\cyc\to \KQ$ defined for a cycle $u=\alpha_n\dots\alpha_1$ as
\[
\partial_\alpha(u) = \sum_{k=1}^n \delta_{\alpha, \alpha_k}\alpha_{k+1}\dots\alpha_n\alpha_1\dots\alpha_{k-1}
\]
and extended linearly and continuously.

We are now able to introduce the \emph{Jacobian algebra} associated to a QP, which is the main object of study in this thesis. Given a QP $(Q,S)$, the \emph{Jacobian ideal} $J(S)$ is the closed ideal in $\KQ$ generated by the set of all cyclic derivatives of the potential, that is, $\{\delta_\alpha(S) : \alpha\in Q_1\}$. The Jacobian algebra $P(Q,S)$ is then the quotient $\KQ/J(S)$.

\begin{exmp} As in \eqref{one-loop}, consider the quiver $Q$ with a single vertex and a unique arrow from that vertex to itself. As we have seen, the complete path algebra $\KQ$ is isomorphic to the algebra of formal power series $k\llbracket x\rrbracket$. Identifying $x$ with the only arrow in the quiver, we see that any potential for Q is of the form $\sum_{n=1}^\infty \lambda_n x^n$ for some choice of scalars $\lambda_n\in k$. For example, let us consider the potential $S=x^n$. Since $x$ is the only arrow in the quiver, we just have to compute $\partial_x(x^n)$, which turns out to be $nx^{n-1}$ (happily coinciding with the usual, commutative notion of derivation). Therefore, the Jacobian algebra is $k\llbracket x\rrbracket/(nx^{n-1})$, which is isomorphic to the truncated polynomial algebra $k[x]/(x^{n-1})$.
\end{exmp}

Two potentials $S$ and $S'$ are said to be \emph{cyclically equivalent} if their difference $S-S'$ lies in the closed $k$-subspace spanned by elements of the form $\alpha_n\dots\alpha_1 - \alpha_1\alpha_n\dots\alpha_2$ where $\alpha_n\dots\alpha_1$ is a cycle, or equivalently, if every term of $S$ is a cyclic permutation of the factors of a term of $S'$. It is easily checked that if $S$ and $S'$ are cyclically equivalent, then $\partial_\alpha(S)$ is just a reordering of the summands of $\partial_\alpha(S')$, and so they coincide. This in turn implies that $S$ and $S'$ induce both the same Jacobian ideal and the same Jacobian algebra.

If $(Q,S)$ and $(Q', S')$ are QPs sharing the same set of vertices, we say that $(Q,S)$ is \emph{right-equivalent} to $(Q',S')$ if there exists a $k$-algebra isomorphism $\varphi:\KQ\to k\langle\langle Q'\rangle\rangle$ fixing the set of vertices and such that $\varphi(S)$ is cyclically equivalent to $S'$. This will be our concept of isomorphism for QPs, since a right-equivalence induces an isomorphism between the respective Jacobian algebras, as seen in Proposition 3.7 from \cite{DWZ08}.

\begin{exmp} Let $Q$ be the quiver with vertices 1 and 2, and arrows $\alpha:1\to 2$, $\beta:2\to1$:
\[
\begin{tikzpicture}[->,node distance=1cm, thick]
\tikzstyle{every node} = [circle, fill=gray!30, minimum size=.5cm, inner sep=.07cm]
\node (1) {1};
\node (2) [right=of 1] {2};
\foreach \from/\to in {2/1, 1/2}
\draw (1.20) -- (2.160) node[midway, above, fill=white] {$\alpha$};
\draw (2.200) -- (1.340) node[midway, below, fill=white] {$\beta$};
\end{tikzpicture}
\]
Any potential for $Q$ is of the form $\sum_{n=1}^\infty \lambda_n (\alpha\beta)^n + \mu_n (\beta\alpha)^n$ for some scalars $\lambda_n, \mu_n\in k$. For instance, the cyclically equivalent potentials $S=(\alpha\beta)^n$ and $S'=(\beta\alpha)^n$ give rise to the same Jacobian ideal, which is $(\partial_\alpha(S), \partial_\beta(S)) = (n(\beta\alpha)^{n-1}\beta, n(\alpha\beta)^{n-1}\alpha)$. As any path of length at least $n$ has either $(\beta\alpha)^{n-1}\beta$ or $(\alpha\beta)^{n-1}\alpha$ as factors, the Jacobian ideal contains $A^d$ for $d\geq n$. Therefore, the Jacobian algebra $P(Q,S)$ turns out to be finite-dimensional.
\end{exmp}

In the context of Jacobian algebras, having finite dimension is a highly desirable attribute. A usual method for proving this, as seen in the works of \cites{LF09, Lad12, TVD12}, consists in showing that enough cycles are contained in the Jacobian ideal, just as we did in the toy example above. We will make use of the diamond lemma in order to produce this kind of arguments in a streamlined fashion.
\end{section}

\begin{section}{Ideal triangulations of surfaces}
In this thesis we will focus primarily on a family of QPs (and their associated Jacobian algebras) arising from a particular procedure carried out on a triangulation of a \textcolor{red}{Riemann?} surface. In order to do this, we start with some basic definitions regarding our geometric objects.

Throughout the text, we will refer to compact, connected, oriented \textcolor{red}{2-manifolds/Riemann surfaces?} with boundary simply as \emph{surfaces}. We now state a classical result in combinatorial topology that completely classifies these objects:\marginpar{la definición de genus debería ir fuera de la prop?}

\begin{prop}\label{surf-classification} Let $\Sigma$ be a surface with a number $b$ of boundary components. Then $\Sigma$ is homeomorphic to either a sphere with $b$ open disks removed or to a $g$-holed torus with $b$ open disks removed. We call the number $g$ the \emph{genus} of the surface and set $g=0$ in the spherical case.
\end{prop}
\begin{proof} See \cite[Section 10]{Mas77}.
\end{proof}

A \emph{surface with marked points} $(\Sigma,M)$ is an ordered pair consisting of a surface $\Sigma$ and a finite, non-empty collection $M$ of points (called \emph{marked points}) of $\Sigma$ containing at least one point from each of its boundary components. Points in $M$ that belong to the interior of $\Sigma$ are called \emph{punctures}.

An \emph{arc} on a surface with marked points $(\Sigma, M)$ is a curve $\gamma:[0,1]\to \Sigma$ such that:
\begin{enumerate}
\item Its endpoints lie in $M$.
\item Its restriction to $(0,1)$ is injective and does not intersect $M$ or the boundary of $\Sigma$.
\item Its image is not contractible into $M$ or onto the boundary of $\Sigma$.
\end{enumerate}
\begin{figure}[h]
\[
\begin{tikzpicture}[thick]
\tikzstyle{every node} = [circle, fill=black, minimum size=.2cm, inner sep=0cm]
\node (se1) at (0,0) {};
\node (sw1) at (2,0) {}
	edge (se1);
\node (n1) at (1,1.73) {}
	edge (se1)
	edge (sw1);
\node (c1) at (1,0.7) {}
	edge (se1);

\node (se2) at (3,0) {};
\node (sw2) at (5,0) {}
	edge (se2);
\node (n2) at (4,1.73) {}
	edge (se2)
	edge (sw2)
	edge [bend left] (se2);
\node (c2) at (4,0.7) {};

\node (se3) at (6,0) {}
	edge [in=25, out=45, distance=1.1cm] (se3);
\node (sw3) at (8,0) {}
	edge (se3);
\node (n3) at (7,1.73) {}
	edge (se3)
	edge (sw3);
\node (c3) at (7,0.7) {};
\end{tikzpicture}
\]
\caption{While the first is an arc of the punctured triangle, the last two are not, since they are contractible to the boundary or to the set of marked points, respectively.}
\end{figure}

We will consider arcs on a surface only up to isotopy relative to $M$. Two arcs will be said to be \emph{compatible} if there exist representatives in their corresponding relative isotopy classes such that they do not intersect in the interior of $\Sigma$. An \emph{ideal triangulation} for $(\Sigma, M)$ is then a maximal family of compatible arcs in $\Sigma$.
\begin{figure}[h] \label{square-triangs}
\[
\begin{tikzpicture}[thick]
\tikzstyle{every node} = [circle, fill=black, minimum size=.2cm, inner sep=0cm]
\node (sw1) at (0,0) {};
\node (nw1) at (0,2) {}
	edge (sw1);
\node (se1) at (2,0) {}
	edge (sw1);
\node (ne1) at (2,2) {}
	edge (nw1)
	edge (se1);
\node (c1) at (1,1) {}
	edge (sw1)
	edge (nw1)
	edge (se1)
	edge (ne1);

\node (sw2) at (3,0) {};
\node (nw2) at (3,2) {}
	edge (sw2);
\node (se2) at (5,0) {}
	edge (sw2)
	edge [bend left] (nw2);
\node (ne2) at (5,2) {}
	edge (nw2)
	edge (se2);
\node (c2) at (4,1) {}
	edge (nw2)
	edge (se2)
	edge (ne2);

\node (sw3) at (6,0) {};
\node (nw3) at (6,2) {}
	edge (sw3);
\node (se3) at (8,0) {}
	edge (sw3)
	edge [bend left] (nw3)
	edge [bend right] (nw3);
\node (ne3) at (8,2) {}
	edge (nw3)
	edge (se3);
\node (c3) at (7,1) {}
	edge (nw3)
	edge (se3);

\node (sw4) at (9,0) {};
\node (nw4) at (9,2) {}
	edge (sw4);
\node (se4) at (11,0) {}
	edge (sw4)
	edge [bend left] (nw4)
	edge [bend right] (nw4)
	edge [in=150, out=120,distance=2.4cm] (se4);
\node (ne4) at (11,2) {}
	edge (nw4)
	edge (se4);
\node (c4) at (10,1) {}
	edge (se4);
\end{tikzpicture}
\]
\caption{Some ideal triangulations of the square with one puncture.}
\end{figure}
\marginpar{\textcolor{red}{las figuras no quedan bien ubicadas}}

An ideal triangulation divides the surface $\Sigma$ into \emph{ideal triangles}. As we can see in \eqref{square-triangs}\marginpar{por algún motivo eqref muestra 1.3 en vez de 1.2...}, such triangulations are more general than the usual ones, since they admit configurations in which two triangles share more than one side. Even more, the three sides of an ideal triangle may not be distinct. In that case we say that the triangle is \emph{self-folded}.
\begin{figure}[h]
\[
\begin{tikzpicture}[thick]
\tikzstyle{every node} = [circle, fill=black, minimum size=.2cm, inner sep=0cm]
\node (se1) at (0,0) {};
\node (sw1) at (2,0) {}
	edge (se1);
\node (n1) at (1,1.73) {}
	edge (se1)
	edge (sw1);
\node (cbase1) at (4,0) {};
\node [draw,circle through=(cbase1), fill=none] at (4,1) {};
\node (cbase2) at (7,0) {};
\node (cmid2) at (7,1) {}
	edge (cbase2);
\node [draw,circle through=(cbase2), fill=none] at (7,1) {};
\end{tikzpicture}
\]
\caption{The three possible kinds of ideal triangles: the usual \emph{triangle} and the self-folded ones, which are the \emph{monogon} and the \emph{digon}.}
\end{figure}

As one may observe, every ideal triangulation of the square pictured in \eqref{square-triangs} \marginpar{\textcolor{red}{la numeración de las figuras debería seguir la de las props?}} consists of exactly 4 arcs. Indeed, the number of arcs in a triangulation is an invariant of the marked surface, which we call its \emph{rank}. More precisely, we have:

\begin{prop}[{\cite[Proposition 2.10]{FST08}}] Any ideal triangulation of a surface with marked points $(\Sigma, M)$ consists of exactly
\[
n=6g+3b+3p+c-6
\]
arcs, where $g$ is the genus of the surface $\Sigma$, $b$ is its number of boundary components, $p$ is the number of punctures and $c$ is the number of marked points lying on the boundary.
\end{prop}
\begin{proof} One can show using the classification theorem \eqref{surf-classification} that the Euler characteristic of a surface $\Sigma$ of genus $g$ with $b$ boundary components is
\begin{equation}\label{euler-ch1}
\chi(\Sigma)=2-2g-b
\end{equation}
\marginpar{revisá el argumento}On the other hand, we can compute the Euler characteristic of the surface regarding an ideal triangulation as a cellular decomposition. Since an ideal triangulation is a maximal collection of compatible arcs, any marked point must be a vertex of the decomposition and so we have $v = c + p$ vertices. As for edges, we have $n$ of them in the interior of the surface and $c$ of them in the boundary, which amounts to $e = n + c$. Finally, we know that each face is triangular, that any edge in the interior of the surface belongs to two different faces, and that edges in the boundary belong to only one face. Therefore, by counting faces we arrive at $3f = 2n+c$. Putting it all together, we get that
\begin{equation}\label{euler-ch2}
\chi(\Sigma)=v-e+f=(c+p)-(n+c)+\left(\frac{2}{3}n+\frac{1}{3} c\right)=p+\frac{1}{3}(c-n)
\end{equation}
The result now follows by equating \eqref{euler-ch1} and \eqref{euler-ch2} and solving for $n$.
\end{proof}

From now on, we will assume that our surface $(\Sigma, M)$ is none of the following:
\begin{enumerate}
\item A sphere with one, two or three punctures.
\item An unpunctured or once-punctured monogon.
\item An unpunctured digon.
\item An unpunctured triangle.
\end{enumerate}
The reason for these exclusions is that the listed surfaces either have no non-trivial triangulations or only have pathological ones. In fact, we have the following result:

\begin{prop}[{\cite[Proposition 2.13]{FST08}}] Let $(\Sigma, M)$ be any surface with marked points not on the list above. Then $(\Sigma, M)$ admits an ideal triangulation involving no self-folded triangles. \hfill\qedsymbol
\end{prop}

\[
\begin{tikzpicture}[thick]
\tikzstyle{every node} = [circle, fill=gray, minimum size=.1cm, inner sep=0cm]
\node (c) at (0,0) {};
\node (n) at (0,4) {};
\node (sw) at (210:4) {};
\node (se) at (330:4) {};
\draw[gray] (c) -- (sw)
	(c) -- (n)
	(c) -- (se)
	(sw) to [bend right = 45] coordinate[midway](m1) (se)
	(n) to [bend right = 45] coordinate[midway](m2) (sw)
	(se) to [bend right = 45] coordinate[midway](m3) (n);
\tikzstyle{every node} = [circle, fill=black, minimum size=.25cm, inner sep=0cm]
\node (in) at (0,2) {};
\node (isw) at (210:2) {};
\node (ise) at (330:2) {};
\node (os) at (m1) {};
\node (onw) at (m2) {};
\node (one) at (m3) {};
\draw[->] (in) -- (onw);
\draw[->] (onw) -- (isw);
\draw[->] (isw) -- (in);
\draw[->] (in) -- (ise);
\draw[->] (ise) -- (isw);
\draw[->] (ise) -- (one);
\draw[->] (one) -- (in);
\draw[->] (isw) -- (os);
\draw[->] (os) -- (ise);
\draw[->] (one) to [bend left=90, distance=100] (os);
\draw[->] (onw) to [bend left=90, distance=100] (one);
\draw[->] (os) to [bend left=90, distance=100] (onw);
\end{tikzpicture}
\]
\end{section}
\end{chapter}