\documentclass[11pt, a4paper]{book}

\usepackage{mathpazo}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage[colorlinks=true, pagebackref=true]{hyperref}
\usepackage[alphabetic]{amsrefs}
\usepackage{mathtools}
\usepackage{xcolor}
\usepackage{titlesec} %reasonable chapter headings
\usepackage{stmaryrd} %double brackets
\usepackage{tikz}
\usepackage[toc,page]{appendix}
\usepackage{listings}
\usepackage{showlabels}

\lstset{language=Python,
backgroundcolor=\color{gray!20},
numberstyle=\footnotesize,
breaklines=true,
basicstyle=\footnotesize,
keywordstyle=\bfseries\color{blue},
commentstyle=\itshape\color{purple},
%identifierstyle=\color{blue},
stringstyle=\color{orange}}
\usetikzlibrary{arrows,positioning,through,decorations.pathmorphing, decorations.markings}

\usepackage{chngcntr}
\counterwithout{equation}{section} %this fixes equation numbering

\titleformat{\chapter}[display]
  {\normalfont\bfseries}{}{0pt}{\Huge} %this eliminates the 'Chapter n' heading

\hypersetup{linkcolor=teal, citecolor=teal}

\def\noteson{%
\gdef\note##1{\marginpar[##1]{##1}}}
\gdef\notesoff{\gdef\note##1{}}
\noteson

\renewcommand\bibname{References}

\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}

\newcommand{\kQ}{k\langle Q\rangle}
\newcommand{\KQ}{k\langle\!\langle Q\rangle\!\rangle}
\newcommand{\cyc}{\mathrm{cyc}}
\newcommand{\cf}{\mathrm{cf}}
\newcommand{\FA}{k\langle x_1,\dots,x_n\rangle}
\newcommand{\mon}{\langle X\rangle}
\newcommand{\irr}{k\langle X\rangle_{\mathrm{irr}}}
\newcommand{\llangle}{\langle\!\langle}
\newcommand{\rrangle}{\rangle\!\rangle}

\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\gr}{gr}

\tikzset{->-/.style={decoration={
  markings,
  mark=at position #1 with {\arrow{>}}},postaction={decorate}}}

\newcommand{\Square}[2]{
\draw (-1+#1, -1+#2) to (-1+#1, 1+#2); %left vertical line
\draw (1+#1, -1+#2) to (1+#1, 1+#2); %right vertical line
\draw (-1+#1, 1+#2) to (1+#1, 1+#2); %top horizontal line
\draw (-1+#1, -1+#2) to (1+#1, -1+#2); %bottom horizontal line
}

\newcommand{\DSquare}[2]{
\draw (-1+#1, -1+#2) to (-1+#1, 1+#2); %left vertical line
\draw (1+#1, -1+#2) to (1+#1, 1+#2); %right vertical line
\draw (-1+#1, 1+#2) to (1+#1, 1+#2); %top horizontal line
\draw (-1+#1, -1+#2) to (1+#1, -1+#2); %bottom horizontal line
\draw (-1+#1, -1+#2) to (1+#1, 1+#2); %diagonal
}

\newcommand{\ArrowedSquare}[2]{
\draw (-1+#1, -1+#2) to (-1+#1, 1+#2); %left vertical line
\draw (1+#1, -1+#2) to (1+#1, 1+#2); %right vertical line
\draw (-1+#1, 1+#2) to (1+#1, 1+#2); %top horizontal line
\draw (-1+#1, -1+#2) to (1+#1, -1+#2); %bottom horizontal line
\draw (-1+#1, -1+#2) to (1+#1, 1+#2); %diagonal
\draw[->, red, very thick] (0.1+#1, -0.9+#2) to (0.9+#1, -0.1+#2); %a
\draw[->, red, very thick] (0.9+#1, #2) to (0.1+#1, #2); %b
\draw[->, red, very thick] (#1, 0.1+#2) to (#1, 0.9+#2); %c
\draw[->, red, very thick] (-0.1+#1, 0.9+#2) to (-0.9+#1, 0.1+#2); %d
\draw[->, red, very thick] (-0.9+#1, #2) to (-0.1+#1, #2); %e
\draw[->, red, very thick] (#1, -0.1+#2) to (#1, -0.9+#2); %f
}

\newcommand\claim[2][.8]{%
  \begin{minipage}{#1\displaywidth}%
  \itshape
  #2
  \end{minipage}%
}

\theoremstyle{plain}
\newtheorem{prop}{Proposition}[chapter]
\newtheorem{lemma}[prop]{Lemma}
\newtheorem{thm}[prop]{Theorem}
\newtheorem{obs}[prop]{Observation}
\theoremstyle{definition}
\newtheorem{exmp}[prop]{Example}
\newtheorem{heur}[prop]{Heuristic}


\begin{document}
\tableofcontents
\input{./preliminaries.tex}
\input{./diamond.tex}
\input{./examples.tex}
\begin{appendix}
\input{./appendix.tex}
\end{appendix}
\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{References}
\input{./bibliography.tex}
\end{document}